name: âœ… CI (Dispatcher)

on:
  pull_request:
  push:
    branches: [main, develop]

permissions:
  contents: read

concurrency:
  group: ci-${{ github.ref }}
  cancel-in-progress: true

jobs:
  policy:
    name: ğŸ§± Repo structure gate
    uses: ./.github/workflows/policy.yml

  security:
    name: ğŸ›¡ï¸ Security suite
    needs: policy
    uses: ./.github/workflows/security-suite.yml

  contracts:
    name: ğŸ“œ Contract tests
    needs: policy
    uses: ./.github/workflows/contract-tests.yml